<!DOCTYPE html>
<html lang="en">
<head>
  <!-- <link rel="stylesheet" href="{{ url_for('static', filename='vendors/mdi/css/materialdesignicons.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}"> -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
  <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"> -->
  <
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div class="row">
    {% if courses %}
    {% for x, course in enum(courses) %}
    <div class="col-xl-6 col-lg-6 col-sm-6 grid-margin stretch-card">
      <div class="card  rounded shadow">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h1 class="mb-2 text-dark font-weight-bold">{{course.course_name}}</h1>
              <span>
                <i class="bi bi-book-half"></i><span> 1</span>
              </span>
              <span>
                {{course.group.name}}
              </span>
            </div>
            {% for performance in course.performances %}
            {% if performance.user_id == user.id %}
            <div class="dashboard-progress dashboard-progress-3 d-flex align-items-center justify-content-center item-parent" data-performance-id="{{ performance.id }}" data-progress="{{ performance.progress }}">
              <span class="absolute-center">Your Progress <div>{{performance.progress}}%</div></span>
            </div>
            {% endif %}
            {% endfor %}
          </div>
          <div class="d-flex justify-content-between mt-4">
            <!-- <button class="button-green btn-space" data-toggle="modal" data-target="#summary-{{course.id}}">Read</button> -->
            <button class="button-outline-green" data-toggle="modal" data-target="#setpractice-{{course.id}}" data-courseid="{{course.id}}">Take Quiz</button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="refer" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Refer</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <input type="text" id="referralLink" class="form-control" value="{{user.referral_link}}" readonly>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" onclick="copyToClipboard()" data-dismiss="modal">Copy</button>
          </div>
        </div>      
      </div>
    </div> 
    <!-- Summary Modal -->
    <div class="modal fade" id="summary-{{course.id}}" tabindex="-1" role="dialog" aria-labelledby="summaryLabel-{{course.id}}" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-body">
            <div id="summary-container-{{course.id}}">
              {% for i, topic in enum(course.topics) %}
              {% for summary in topic.summaries %}
              <div class="summary-item" data-topic-index="{{i}}" data-summary-index="{{loop.index0}}">
                <div class="modal-header">
                  <h5 class="modal-title" id="summaryLabel-{{course.id}}">{{topic.name}}</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span>{{i+1}}/{{course.topics|length}}</span>
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="progress">
                  <div class="progress-bar" data-summary-length="{{topic.summaries|length}}" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <p>{{summary.text}}</p>
                <p>{{summary.keynote}}</p>
              </div>
              {% endfor %}
              {% endfor %}
            </div>
            <div class="modal-footer">
              <button type="button" class="button-outline-green prev-btn" data-course-id="{{course.id}}">Prev</button>
              <button type="button" class="button-green next-btn" data-course-id="{{course.id}}">Next</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Practice Modal -->
    <div class="modal fade" id="setpractice-{{course.id}}" tabindex="-1" role="dialog" aria-labelledby="practiceLabel-{{course.id}}" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="practiceLabel-{{course.id}}">Study Mode Settings</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form id="practiceForm-{{course.id}}" method="GET" action="/practice/{{ user.id }}/{{ course.id }}">
              <div class="form-group">
                  <label for="studymode-{{course.id}}" class="col-form-label">Select Mode</label>
                  <select required class="form-select mode" name="mode" aria-label="mode-{{course.id}}" data-courseid="{{course.id}}">
                      <option value="practice">Quiz Mode</option>
                      <!-- <option value="exam">Exam Mode</option> -->
                  </select>
              </div>
              <div class="form-group">
                  <label for="topics-{{course.id}}">Select Topics</label>
                  <select required multiple name="topics" id="topics-{{course.id}}">
                      {% for i, topic in enum(course.topics) %}
                      <option value="{{ topic.id }}">{{ topic.name }}</option>
                      {% endfor %}
                  </select>
              </div>
              <div class="form-group">
                  <label for="time" class="col-form-label">Time Per Question (secs)</label>
                  <input type="number" name="time" class="form-control" value="10" id="time" placeholder="seconds">
              </div>
              <div class="form-group">
                  <label for="num_questions" class="col-form-label">No. of Questions</label>
                  <input type="number" name="num_questions" value="50" class="form-control" id="num_questions" placeholder="number of questions">
              </div>
              <div class="form-group">
                  <label for="order-{{course.id}}" class="col-form-label">Order</label>
                  <select class="form-select order" name="order" aria-label="order-{{course.id}}" data-courseid="{{course.id}}">
                      <option value="orderly">Orderly</option>
                      <option value="shuffled">Shuffled</option>
                  </select>
              </div>
              <div class="modal-footer">
                  <button type="button" class="button-outline-green" data-dismiss="modal">Cancel</button>
                  <button type="submit" class="button-green button-pin" id="button-pin-{{course.id}}">Start Practice</button>
              </div>
          </form>
              
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
    {% endif %}
    
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Course Description</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form action="/user/create-course/{{group_id}}" method="post" enctype="multipart/form-data">
            <div class="form-group">
              <label for="course-name" class="col-form-label">Course Name:</label>
              <input type="text" required name="course-name" class="form-control" id="course-name" placeholder="Title">
            </div>
            <div class="form-group">
                <label for="url" class="col-form-label">Url:</label>
                <input type="text" name="url" class="form-control" id="url" placeholder="Link to downloadable document">
            </div>
            <div class="form-group">
              <label for="message-text" class="col-form-label">Description</label>
              <textarea name="description" class="form-control" id="message-text"></textarea>
            </div>
            <div class="form-group">
              <label for="file" class="col-form-label">Upload File:</label>
              <input type="file" name="file" class="form-control" id="file">
          </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              <button type="submit" id="button-up" class="button-green">Upload</button>
            </div>
          </form>
        </div>
      </div>
    </div>
</div>
</div>
</body>

    <script src="{{ url_for('static', filename='vendors/js/vendor.bundle.base.js.download') }}"></script>
   <script src="{{ url_for('static', filename='vendors/js/circle-progress.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</html>
