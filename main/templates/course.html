{% extends 'base.html' %}
{% block title %} Courses {% endblock %}
{% block text %}Upload{%endblock%}
{% block content%}
{% if courses %}
<h3>Courses</h3>
<div class="row">
  {% for course in courses %}
    <div class="col-md-12 col-sm-12 col-lg-6 col-xl-6">
      <div class="dash-widget">
        <span class="dash-widget-bg"><i class="fa fa-stethoscope" aria-hidden="true"></i></span>
        <div class="dash-widget-info text-right">
          <h3>{{course.course_name}}</h3>
          <span class="widget-title1">{{course.no_of_topics}} topics</i></span><br>
          <span class="widget-title2">20 practice questions</i></span>
        </div>
        <button class="start-quiz button-upload" data-toggle="modal" data-target="#setpractice" data-courseid="{{course.id}}" >Start Practice</button>
      </div>
    </div>
  {% endfor %}
</div>
{% endif %}
<div class="modal fade" id="setpractice" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Set Up practice Mode</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-check">
            <input type="checkbox" name="exam-mode" class="form-check-input" id="exam-mode">
            <label for="exam-mode" class="form-check-label">Exam Mode</label>
          </div>
          <div class="form-group">
            <label for="hours" class="col-form-label">Hours:</label>
            <input type="number" name="hours" class="form-control" id="hours" placeholder="hours">
          </div>
          <div class="form-group">
            <label for="miuntes" class="col-form-label">Minutes:</label>
            <input type="number" name="miuntes" class="form-control" id="minutes" placeholder="minutes">
          </div>
          <!-- <div class="form-group">
            <label for="topics" class="col-form-label">Select Topics:</label>
            <input type="text" name="topics" class="form-control" id="minutes" placeholder="default pin is 1234">
          </div> -->
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="button" id="button-pin" class="button-upload">Start Practice</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div> 
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Course Description</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form action="/user/create-course/{{group_id}}" method="post">
            <div class="form-group">
              <label for="course-name" class="col-form-label">Course Name:</label>
              <input type="text" name="course-name" class="form-control" id="course-name" placeholder="Title">
            </div>
            <div class="form-group">
              <label for="number-of-topics" class="col-form-label">Number Of Topics:</label>
              <input type="number" name="number-of-topics" class="form-control" id="number-of-topics" placeholder="Topics">
            </div>
            <div class="form-group">
                <label for="url" class="col-form-label">Url:</label>
                <input type="text" name="url" class="form-control" id="url" placeholder="Link to downloadable document">
            </div>
            <div class="form-group">
              <label for="message-text" class="col-form-label">Description</label>
              <textarea name="description" class="form-control" id="message-text"></textarea>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              <button type="submit" id="button-up" class="button-upload">Upload</button>
            </div>
          </form>
        </div>
      </div>
    </div>
</div>
{% endblock content%}

{% block script %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>

  $(document).ready(function () {
    let courseId;
    console.log("here")
    $('#setpractice').on('show.bs.modal', function (event) {
        var button = $(event.relatedTarget); // Button that triggered the modal
        courseId = button.data('courseid'); // Extract group ID from data-groupid attribute
    });
    $('#button-pin').click(function(event) {
      console.log(courseId);
      window.location.href = '/practice/' + "{{user.id}}/" + courseId;

  });   
})
</script>
{% endblock %}